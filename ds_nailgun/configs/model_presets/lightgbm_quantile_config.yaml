# LightGBM Quantile Regression Model Configuration (q=0.9)

model:
  type: LGBMRegressor
  library: lightgbm
  parameters:
    n_estimators: 1000  # Increased for early stopping
    max_depth: 6
    learning_rate: 0.1
    subsample: 0.8
    colsample_bytree: 0.8
    random_state: 1986
    verbosity: 0  # Reduced verbosity for speed
    n_jobs: -1  # Use all available CPU cores
    # Quantile regression specific parameters
    objective: 'quantile'
    alpha: 0.9  # Quantile level (0.9 = 90th percentile)
    early_stopping_round: 50  # Enable early stopping for quantile regression

# Optional hyperparameter tuning configuration
hypertuning:
  method: "halving_random_search"  # Successive halving with random search for efficient large-scale optimization
  n_candidates: 30  # Number of candidate parameter combinations to evaluate initially
  n_iter: 20  # Number of parameter combinations to try
  parameters:
    max_depth: [3, 4, 5, 6, 8, 10, -1]  # -1 means no limit
    learning_rate: [0.01, 0.05, 0.1, 0.2, 0.3]
    subsample: [0.6, 0.7, 0.8, 0.9, 1.0]
    colsample_bytree: [0.6, 0.7, 0.8, 0.9, 1.0]
    num_leaves: [20, 31, 50, 100, 150]  # Added num_leaves for better control
    min_child_samples: [10, 20, 30, 50, 100]  # Added min_child_samples
    verbosity: [-1]  # Silent during tuning
  cv: 3  # Cross-validation folds
  scoring:
    name: 'pinball_loss'
    alpha: 0.9  # Quantile level for pinball loss scoring
  n_jobs: 1  # Halving search doesn't parallelize well
  factor: 3  # Halving factor - eliminate 2/3 of candidates each round
  resource: 'n_estimators'  # Resource parameter to optimize (number of trees)
  max_resources: 1000  # Maximum resources (n_estimators) to use
  min_resources: 50  # Minimum resources to start with